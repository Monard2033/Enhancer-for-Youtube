{
  "version": "3.0.11",
  "settings": {
    "applyvideofilters": false,
    "backdropcolor": "#000000",
    "backdropopacity": 85,
    "blackbars": false,
    "blockautoplay": false,
    "blockhfrformats": false,
    "blockwebmformats": false,
    "boostvolume": false,
    "cinemamode": false,
    "cinemamodewideplayer": false,
    "controlbar": {
      "active": false,
      "autohide": false,
      "centered": true,
      "position": "fixed"
    },
    "controls": [],
    "controlsvisible": false,
    "controlspeed": false,
    "controlspeedmousebutton": false,
    "controlvolume": false,
    "controlvolumemousebutton": false,
    "convertshorts": false,
    "customcolors": {
      "--dimmer-text": "#cccccc",
      "--hover-background": "#232323",
      "--main-background": "#111111",
      "--main-color": "#00adee",
      "--main-text": "#eff0f1",
      "--second-background": "#181818",
      "--shadow": "#000000"
    },
    "customcss": "",
    "customscript": "// ==UserScript==\n// @name         Youtube Enhancer\n// @namespace    http://tampermonkey.net/\n// @version      1.0\n// @description  try to take over the world!\n// @author       You\n// @match        https://www.youtube.com/*\n// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\n// @grant        none\n// ==/UserScript==\n\n(function () {\n// Core Module: Shared state, utilities, and DOM cache\nconst Core = (function () {\nlet isClicked = true;\nlet isSkippingEnabled = true;\nlet hasNavigationButtonBeenFetched = false;\nlet navigationButtonDown = null;\nlet lastUrl = null;\nlet lastShortsId = null;\nlet observer = null;\nlet observerShortsId = null;\nlet isScrollButtonCreated = false;\nlet lastProcessedShortsId = null;\nlet lastMaxLoadTime = 500;\nlet lastWheelEvent = 0;\nlet lastKeyEvent = 0;\nconst debounceDelay = 1000;\n\nconst cache = {\ncenter: null,\ncontainer: null,\nprimary: null,\ncolumns: null\n};\n\nfunction throttle(fn, delay) {\nlet lastCall = 0;\nreturn (...args) => {\nconst now = Date.now();\nif (now - lastCall >= delay) {\nlastCall = now;\nfn(...args);\n}\n};\n}\n\nfunction debounce(fn, delay) {\nlet timeoutId;\nreturn (...args) => {\nclearTimeout(timeoutId);\ntimeoutId = setTimeout(() => {\nfn(...args);\n}, delay);\n};\n}\n\nfunction waitForDOMElement(selector, callback, options = {}) {\nconst { interval = 100, timeout = 15000, delay = 0 } = options;\nconst startTime = Date.now();\nconst checkElement = () => {\nconst element = document.querySelector(selector);\nif (element) {\ncallback(element);\n} else if (Date.now() - startTime < timeout) {\nsetTimeout(checkElement, interval);\n}\n};\nif (delay > 0) {\nsetTimeout(checkElement, delay);\n} else {\ncheckElement();\n}\n}\n\nfunction waitForAllDOMElements(selectors, options = {}) {\nconst { timeout = 15000, maxRetries = 2, defaultDelay = 100 } = options;\nreturn new Promise((resolve, reject) => {\nconst results = {};\nlet completed = 0;\nlet retryCount = 0;\n\nfunction pollElements(remainingSelectors) {\nif (!remainingSelectors.length) {\nresolve(results);\nreturn;\n}\n\nremainingSelectors.forEach(selector => {\nif (results[selector]) return; // Skip already found\nwaitForDOMElement(\nselector,\nelement => {\nresults[selector] = { element, foundAt: performance.now() };\ncompleted++;\nif (completed === selectors.length) {\n// Update lastMaxLoadTime based on max load time\nconst loadTimes = Object.values(results).map(r => r.foundAt - performance.now());\nCore.state.lastMaxLoadTime = Math.max(...loadTimes, defaultDelay);\nresolve(results);\n}\n},\n{ interval: 100, timeout, delay: Core.state.lastMaxLoadTime || defaultDelay }\n);\n});\n\nsetTimeout(() => {\nif (completed < selectors.length && retryCount < maxRetries) {\nretryCount++;\n// Calculate dynamic retry delay based on found elements\nconst foundTimes = Object.values(results).map(r => r.foundAt - performance.now());\nconst avgLoadTime = foundTimes.length ? foundTimes.reduce((a, b) => a + b, 0) / foundTimes.length : timeout / 2;\nconst retryDelay = Math.max(1000, avgLoadTime * 1.5);\nconsole.warn(`Retrying ${remainingSelectors.filter(s => !results[s]).length} selectors, attempt ${retryCount + 1}/${maxRetries}, delay ${retryDelay}ms`);\nsetTimeout(() => pollElements(remainingSelectors.filter(s => !results[s])), retryDelay);\n} else if (completed < selectors.length) {\nconst missing = selectors.filter(s => !results[s]);\nreject(new Error(`Failed to find selectors after ${maxRetries} retries: ${missing.join(', ')}`));\n}\n}, timeout);\n}\npollElements(selectors);\n});\n}\n\nfunction checkIfWatchPage() {\nreturn window.location.href.includes('youtube.com/watch');\n}\n\nfunction checkIfShortsPage() {\nreturn window.location.href.includes('youtube.com/shorts');\n}\n\nfunction getShortsId() {\nconst url = window.location.href;\nconst match = url.match(/youtube\\.com\\/shorts\\/([^?]+)/);\nreturn match ? match[1] : null;\n}\n\nfunction pauseVideo() {\nconst videoElement = document.querySelector('video');\nif (videoElement && !videoElement.paused) {\nvideoElement.pause();\n}\n}\n\nreturn {\nstate: {\nisClicked, isSkippingEnabled, hasNavigationButtonBeenFetched, navigationButtonDown,\nlastUrl, lastShortsId, observer, observerShortsId, isScrollButtonCreated,\nlastProcessedShortsId, lastMaxLoadTime, lastWheelEvent, lastKeyEvent, debounceDelay\n},\nutils: { throttle, debounce, waitForDOMElement, waitForAllDOMElements, checkIfWatchPage, checkIfShortsPage, getShortsId, pauseVideo },\ncache\n};\n})();\n\n// Styles Module: CSS injection\nconst Styles = (function () {\nconst styleElement = document.createElement('style');\ndocument.head.appendChild(styleElement);\nstyleElement.textContent = `\n:root {\n--dark-bt: rgb(200 200 200 / 15%);\n--dark-bt-hover: rgba(255 255 255 /25%);\n--dark-bt-tp: rgb(0 0 0/ 1%);\n--light-bt: rgb(0 0 0 / 7%);\n--light-bt-tp: rgb(255 255 255/ 1%);\n--light-bt-hover: rgb(0 0 0 /15%);\n}\n#start.ytd-masthead, #end.ytd-masthead {\nheight: 50px;\nborder-radius: 30px;\ndisplay: flex;\nposition: static;\nmargin: 0 10%;\nborder: 1px dotted red;\nbackground-color: var(--light-bt);\n}\n.ytSearchboxComponentHost {\nheight: 53px;\nmargin: 0 12px 0 0;\n}\n.ytSearchboxComponentInputBox {\nmargin: 0 0 0 0;\nborder: 1px dotted red;\nbox-shadow: none;\nheight: 50px;\nbackground: transparent;\nbackground-color: var(--light-bt);\ndisplay: flex;\njustify-content: space-around;\n}\n#center.ytd-masthead {\nmargin: auto;\nflex: 0 0 550px;\n}\n#container.ytd-masthead {\nbox-shadow: none;\nbackground: transparent;\ndisplay: flex;\nopacity: 1;\nz-index: 1000;\njustify-content: space-evenly;\n}\nytd-watch-flexy[flexy] #secondary.ytd-watch-flexy {\nmin-width: 450px;\npadding-right: 0px;\n}\n.ytSearchboxComponentSearchButton {\nbackground: transparent;\nborder: 1px dotted red;\nbackground-color: var(--light-bt);\nheight: 52px;\n}\n#background.ytd-masthead {\nposition: fixed;\nopacity: 0;\nvisibility: visible;\n}\n#search-form.ytd-searchbox {\nheight: 50px;\n}\nytd-searchbox.ytd-masthead {\nmargin: 0;\npadding: 0 10px;\n}\n#sections.ytd-guide-renderer {\nposition: relative;\n}\n#sections.ytd-guide-renderer>*.ytd-guide-renderer:first-child {\npadding: 0px;\n}\n#voice-search-button.ytd-masthead {\nmargin-left: 0;\nbackground: transparent;\n}\n#chips-wrapper.ytd-feed-filter-chip-bar-renderer {\ndisplay: none;\n}\n.yt-spec-icon-shape {\ncolor: #c00;\n}\nytd-feed-filter-chip-bar-renderer {\nheight: 0;\n}\n#frosted-glass.with-chipbar.ytd-app {\ndisplay: none;\n}\n.yt-core-attributed-string--white-space-no-wrap {\ncolor: #c00 !important;\n}\n.yt-spec-button-shape-next--mono.yt-spec-button-shape-next--filled {\nbackground: none !important;\ncolor:black !important;\n}\n.yt-spec-button-shape-next--overlay.yt-spec-button-shape-next--text,\n.yt-spec-button-shape-next--mono.yt-spec-button-shape-next--text {\nbackground-color: var(--light-bt) !important;\n}\nyt-chip-cloud-chip-renderer[chip-style=STYLE_DEFAULT][selected] #chip-container.yt-chip-cloud-chip-renderer {\nbackground-color: var(--yt-spec-badge-chip-background) !important;\ncolor: var(--yt-spec-text-primary) !important;\n}\n.yt-spec-touch-feedback-shape {\nborder: 1px dotted red;\n}\n.yt-spec-touch-feedback-shape:hover {\nbackground-color: var(--light-bt-hover) !important;\n}\n#content > yt-lockup-view-model > div > yt-touch-feedback-shape > div {\nbackground-color: var(--light-bt-tp) !important;\nborder: none !important;\n}\n#contents > yt-lockup-view-model:nth-child(n) > div > yt-touch-feedback-shape > div {\nbackground-color: var(--light-bt-tp) !important;\nborder: none !important;\n}\n@media (prefers-color-scheme: dark) {\n#start.ytd-masthead,\n.ytSearchboxComponentInputBox,\n#container.ytd-searchbox,\n#end.ytd-masthead,\n.scroll-top-btn,\n.skip-toggle-btn,\n.ytSearchboxComponentSearchButton,\n.yt-spec-touch-feedback-shape,\n#voice-search-button.ytd-masthead\n{\nbackground-color: var(--dark-bt) !important;\n}\n#content > yt-lockup-view-model > div > yt-touch-feedback-shape > div {\nbackground-color: var(--dark-bt-tp) !important;\nborder: none !important;\n}\n#contents > yt-lockup-view-model:nth-child(n) > div > yt-touch-feedback-shape > div {\nbackground-color: var(--dark-bt-tp) !important;\nborder: none !important;\n}\n.yt-spec-button-shape-next--mono.yt-spec-button-shape-next--filled {\ncolor: red !important;\n}\n#start.ytd-masthead:hover,\n.ytSearchboxComponentInputBox:hover,\n#container.ytd-searchbox:hover,\n#end.ytd-masthead:hover,\n.scroll-top-btn:hover,\n.skip-toggle-btn:hover,\n.ytSearchboxComponentSearchButton:hover,\n.yt-spec-touch-feedback-shape:hover,\n.yt-spec-button-shape-next--overlay.yt-spec-button-shape-next--text:hover,\n#voice-search-button.ytd-masthead:hover\n{\nbackground-color: var(--dark-bt-hover) !important;\n}\n}\n#scroll-top-container {\nposition: fixed;\nbottom: 20px;\nwidth: 55px;\nheight: 55px;\ntransition: opacity 0.3s ease;\nz-index: 1000;\nopacity: 0;\n}\n.scroll-top-btn {\npointer-events: all;\nwidth: 100%;\nheight: 100%;\nborder-radius: 50%;\ncursor: pointer;\nborder: 1px dotted red;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nbackground-color: var(--light-bt);\n}\n.scroll-top-btn:hover {\nbackground-color: var(--light-bt-hover);\n}\n.scroll-up-btn {\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nheight: 100%;\nwidth: 100%;\n}\n.skip-toggle-btn {\npointer-events: all;\nwidth: 56px;\nheight: 56px;\nmargin: 0;\nborder-radius: 50%;\ncursor: pointer;\nborder: none;\ntransition: background-color 0.2s ease, opacity 4s ease;\nz-index: 1000;\nopacity: 1;\njustify-content: center;\nalign-items: center;\n}\n.skip-toggle-btn:hover {\nbackground-color: var(--light-bt-hover);\n}\n.toggle-icon {\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nheight: 100%;\nwidth: 100%;\ncolor: #c00;\nfont-size: 13px;\nfont-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande',\n'Lucida Sans Unicode', Geneva, Verdana, sans-serif;\nfont-weight: 600;\n}\n.skip-tooltip {\ndisplay: flex;\nposition: absolute;\nleft: -150px;\ntop: 0;\nheight: 25px;\ntransform: translateY(8px);\nbackground-color: #707070;\ncolor: #ffffff;\npadding: 6px 8px;\nborder-radius: 4px;\nfont-family: \"Roboto\", \"Arial\", sans-serif;\nfont-size: 1.2rem;\nline-height: 1.8rem;\nfont-weight: 400;\nalign-items: center;\nz-index: 1001;\nopacity: 0;\nvisibility: hidden;\ntransition: opacity 0.2s ease-in-out;\n}\n.skip-toggle-btn:hover+.skip-tooltip,\n.skip-tooltip:hover {\nopacity: 1;\nvisibility: visible;\n}\n`;\n})();\n\n// Layout Module: Layout updates with cached DOM elements via waitForAllDOMElements\nconst Layout = (function () {\nconst { utils, cache } = Core;\n\nfunction updateLayout() {\n// Check if masthead elements are cached\nif (!cache.center || !cache.center.isConnected || !cache.container || !cache.container.isConnected) {\nconst selectors = ['#center.ytd-masthead', '#container.ytd-masthead'];\nutils.waitForAllDOMElements(selectors, { timeout: 15000, maxRetries: 2 })\n.then(results => {\ncache.center = results['#center.ytd-masthead'].element;\ncache.container = results['#container.ytd-masthead'].element;\nif (cache.center && cache.container) {\nconst windowWidth = window.innerWidth;\nconst scrollPosition = window.scrollY || document.documentElement.scrollTop;\ncache.container.style.opacity = scrollPosition === 0 ? '1' : '0.6';\nlet centerFlexBasis = 200 + (windowWidth - 1035) * 0.3955;\ncenterFlexBasis = Math.max(200, Math.min(550, centerFlexBasis));\ncache.center.style.flex = `0 0 ${centerFlexBasis}px`;\n}\n})\n.catch(() => {});\n} else {\n// Use cached masthead elements\nconst windowWidth = window.innerWidth;\nconst scrollPosition = window.scrollY || document.documentElement.scrollTop;\ncache.container.style.opacity = scrollPosition === 0 ? '1' : '0.6';\nlet centerFlexBasis = 200 + (windowWidth - 1035) * 0.3955;\ncenterFlexBasis = Math.max(200, Math.min(550, centerFlexBasis));\ncache.center.style.flex = `0 0 ${centerFlexBasis}px`;\n}\n\nif (utils.checkIfWatchPage()) {\n// Cache primary and columns if not already cached\nif (!cache.primary || !cache.primary.isConnected || !cache.columns || !cache.columns.isConnected) {\nconst selectors = ['#primary', '#columns'];\nutils.waitForAllDOMElements(selectors, { timeout: 15000, maxRetries: 2 })\n.then(results => {\ncache.primary = results['#primary'].element;\ncache.columns = results['#columns'].element;\napplyWatchStyles();\n})\n.catch(err => console.error(`Watch page caching failed: ${err.message}`));\n} else {\napplyWatchStyles();\n}\n}\n\nfunction applyWatchStyles() {\nconst viewportWidth = window.innerWidth;\nlet maxWidthValue, position;\nif (window.screen.width === 2560 && window.screen.height === 1440) {\nmaxWidthValue = 2300;\nposition = window.pageYOffset >= 4200 ? viewportWidth * 0.75 + 20 : viewportWidth * 0.55 - 30;\n} else {\nmaxWidthValue = 1850;\nposition = 0.8633 * (viewportWidth - 1035) + 80;\nposition = Math.max(80, Math.min(854, position));\n}\n\nconst cssRules = `\n#primary.ytd-watch-flexy {\nmax-width: ${maxWidthValue}px !important;\nmargin-left: 0px !important;\nmargin-top: 12px !important;\n}\n#columns.ytd-watch-flexy {\nmax-width: ${maxWidthValue}px !important;\n}\nbody.efyt-mini-player.efyt-mini-player-top-right #movie_player:not(.ytp-fullscreen) {\nheight: 315px !important;\nborder-radius: 14px !important;\ntop: 55px !important;\nleft: ${position}px !important;\n}\nbody._top-right #efyt-close-mini-player {\ntop: 60px !important;\nleft: ${position}px !important;\nwidth: 3%;\nheight: 3%;\n}\n`;\nlet pageStyles = document.querySelector('style[data-page-styles]');\nif (!pageStyles) {\npageStyles = document.createElement('style');\npageStyles.setAttribute('data-page-styles', 'true');\ndocument.head.appendChild(pageStyles);\n}\npageStyles.textContent = cssRules;\n}\n}\n\nreturn { updateLayout };\n})();\n\n// Shorts Module: Shorts skipping and toggle button\nconst Shorts = (function () {\nconst { state, utils } = Core;\n\nfunction createShortsSkipBtn() {\nif (utils.checkIfShortsPage()) {\nlet autoskipContainer = document.getElementById('shorts-autoskip');\nif (!autoskipContainer) {\nautoskipContainer = document.createElement('div');\nautoskipContainer.className = 'navigation-button style-scope ytd-shorts';\nautoskipContainer.id = 'shorts-autoskip';\n\nconst toggleButton = document.createElement('button');\ntoggleButton.id = 'shorts-skip-toggle';\ntoggleButton.className = 'skip-toggle-btn';\n\nconst touchFeedbackShape = document.createElement('div');\ntouchFeedbackShape.className = 'yt-spec-touch-feedback-shape';\ntoggleButton.appendChild(touchFeedbackShape);\n\nconst icon = document.createElement('span');\nicon.className = 'toggle-icon';\nicon.textContent = 'SKIP';\ntoggleButton.appendChild(icon);\n\nconst tooltip = document.createElement('div');\ntooltip.className = 'skip-tooltip';\ntooltip.textContent = 'Toggle Video Skipping';\ntooltip.setAttribute('role', 'tooltip');\ntooltip.setAttribute('aria-label', 'Toggle Video Skipping');\n\nautoskipContainer.appendChild(toggleButton);\nautoskipContainer.appendChild(tooltip);\n\nutils.waitForDOMElement(\n'.navigation-container.style-scope.ytd-shorts',\nnavigationContainer => {\nutils.waitForDOMElement(\n'#navigation-button-up',\nnavigationButtonUp => {\nnavigationContainer.insertBefore(autoskipContainer, navigationButtonUp);\n},\n{ interval: 100, timeout: 15000 }\n);\n},\n{ interval: 100, timeout: 15000 }\n);\n\ntoggleButton.addEventListener('click', () => {\nstate.isSkippingEnabled = !state.isSkippingEnabled;\nicon.textContent = state.isSkippingEnabled ? 'SKIP' : 'NO SKIP';\n\nif (state.isSkippingEnabled) {\nconst progressBarElement = document.querySelector('#scrubber > desktop-shorts-player-controls > div > yt-progress-bar > div');\nif (progressBarElement && state.observer) {\nstate.observer.observe(progressBarElement, {\nattributes: true,\nattributeFilter: ['aria-valuetext'],\n});\n}\n} else if (!state.isSkippingEnabled && state.observer) {\nstate.observer.disconnect();\n}\n});\n}\n}\n}\n\nfunction SkippingShortsMechanism() {\nif (utils.checkIfShortsPage()) {\nconst currentShortsId = utils.getShortsId();\nif (currentShortsId === state.lastProcessedShortsId && state.observer && currentShortsId === state.observerShortsId) {\nreturn;\n}\nstate.isClicked = false;\nstate.lastProcessedShortsId = currentShortsId;\n\nif (state.observer) {\nstate.observer.disconnect();\nstate.observer = null;\nstate.observerShortsId = null;\n}\n\nconst selectors = [\n'#navigation-button-down > ytd-button-renderer > yt-button-shape > button',\n'#scrubber > desktop-shorts-player-controls > div > yt-progress-bar > div'\n];\nutils.waitForAllDOMElements(selectors, { timeout: 15000, maxRetries: 2 })\n.then(results => {\nconst navButton = results[selectors[0]].element;\nlet progressBarElement = results[selectors[1]].element;\nif (!state.hasNavigationButtonBeenFetched) {\nstate.navigationButtonDown = navButton;\nstate.hasNavigationButtonBeenFetched = true;\n\nstate.navigationButtonDown.addEventListener('click', function observerReinitHandler(e) {\nif (!e.isTrusted) {\nreturn;\n}\nstate.navigationButtonDown.removeEventListener('click', observerReinitHandler);\nif (state.observer) {\nstate.observer.disconnect();\nstate.observer = null;\nstate.observerShortsId = null;\n}\n});\n}\n\nlet maxWidth = 0;\nlet previousWidth = 0;\nlet mutationCount = 0;\n\nstate.observer = new MutationObserver(mutations => {\nmutationCount++;\nmutations.forEach(mutation => {\nif (mutation.attributeName === 'aria-valuetext' && state.isSkippingEnabled) {\nlet ariaValueText = progressBarElement.getAttribute('aria-valuetext');\nif (!ariaValueText) {\nprogressBarElement = document.querySelector('#scrubber > desktop-shorts-player-controls > div > yt-progress-bar > div');\nariaValueText = progressBarElement ? progressBarElement.getAttribute('aria-valuetext') : null;\n}\nif (ariaValueText) {\nlet widthNumber = parseFloat(ariaValueText.replace('%', ''));\nif(widthNumber >= 90) {\nconsole.log(\"WN:\" , widthNumber);\n}\nif (widthNumber >= maxWidth) {\nmaxWidth = widthNumber;\npreviousWidth = widthNumber;\n} else if (!state.isClicked) {\nif ((widthNumber === 0 || widthNumber === 1) && previousWidth >= 97) {\nutils.pauseVideo();\nstate.navigationButtonDown.click();\nstate.isClicked = true;\nstate.observer.disconnect();\nstate.observer = null;\nstate.observerShortsId = null;\nmaxWidth = 0;\npreviousWidth = 0;\n} else {\npreviousWidth = widthNumber;\n}\n}\n}\n}\n});\n});\nstate.observer.observe(progressBarElement, {\nattributes: true,\nattributeFilter: ['aria-valuetext'],\n});\nstate.observerShortsId = currentShortsId;\n})\n.catch(err => console.error(`waitForAllDOMElements failed: ${err.message}`));\n}\n}\n\nfunction removeToggleButton() {\nconst toggleButton = document.querySelector('#shorts-skip-toggle');\nif (toggleButton && toggleButton.parentNode) {\ntoggleButton.dispatchEvent(new Event('remove'));\ntoggleButton.parentNode.removeChild(toggleButton);\n}\n}\n\nreturn { createShortsSkipBtn, SkippingShortsMechanism, removeToggleButton };\n})();\n\n// Watch Module: Scroll-to-top button\nconst Watch = (function () {\nconst { state, utils } = Core;\n\nfunction createScrollToTopBtn() {\nlet scrollTopContainer = document.getElementById('scroll-top-container');\nif (!scrollTopContainer) {\nscrollTopContainer = document.createElement('div');\nscrollTopContainer.setAttribute('id', 'scroll-top-container');\nscrollTopContainer.className = 'navigation-button style-scope ytd-watch-flexy';\nconst scrollToTopBtn = document.createElement('button');\nscrollToTopBtn.setAttribute('id', 'scroll-to-top');\nscrollToTopBtn.className = 'scroll-top-btn';\nscrollToTopBtn.setAttribute('aria-label', 'Scroll to Top');\n\nconst svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\nconst pathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\nconst divElement = document.createElement('div');\n\nsvgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\nsvgElement.setAttribute('height', '24');\nsvgElement.setAttribute('viewBox', '0 0 24 24');\nsvgElement.setAttribute('width', '24');\nsvgElement.setAttribute('focusable', 'false');\nsvgElement.style.fill = 'red';\nsvgElement.style.display = 'flex';\npathElement.setAttribute('d', 'M19.884 10.114a1.25 1.25 0 01-1.768 1.768L13.25 7.016v12.982a1.25 1.25 0 11-2.5 0V7.016l-4.866 4.866a1.25 1.25 0 11-1.768-1.768L12 2.299l7.884 7.884Z');\nsvgElement.appendChild(pathElement);\ndivElement.classList.add('scroll-up-btn');\ndivElement.appendChild(svgElement);\nscrollToTopBtn.appendChild(divElement);\nscrollTopContainer.appendChild(scrollToTopBtn);\ndocument.body.appendChild(scrollTopContainer);\nstate.isScrollButtonCreated = true;\n\nconst updatePosition = () => {\nconst viewportWidth = window.innerWidth;\nlet buttonPosition;\nif (window.screen.width === 2560 && window.screen.height === 1440) {\nbuttonPosition = 0.904 * (viewportWidth - 1035) + 544;\n} else {\nbuttonPosition = 0.904 * (viewportWidth - 1035) + 544;\n}\nbuttonPosition = Math.max(544, Math.min(1344, buttonPosition));\nscrollTopContainer.style.left = `${buttonPosition}px`;\n};\nupdatePosition();\n\nscrollToTopBtn.addEventListener('click', () => {\nwindow.scrollTo({\ntop: 0,\nbehavior: 'smooth',\n});\nsetTimeout(() => Layout.updateLayout(), 500);\n});\n\nwindow.addEventListener('resize', utils.throttle(() => {\nif (utils.checkIfWatchPage()) {\nupdatePosition();\n}\n}, 30));\n}\n}\n\nfunction handleScroll() {\nconst scrollPosition = window.scrollY || document.documentElement.scrollTop;\nLayout.updateLayout();\nconst scrollTopContainer = document.getElementById('scroll-top-container');\nif (scrollTopContainer) {\nscrollTopContainer.style.opacity = (scrollPosition > 1000 && utils.checkIfWatchPage()) ? '1' : '0';\n}\nif (utils.checkIfWatchPage() && !state.isScrollButtonCreated) {\ncreateScrollToTopBtn();\n}\n}\n\nfunction removeScrollButton() {\nconst scrollTopContainer = document.getElementById('scroll-top-container');\nif (scrollTopContainer) {\nscrollTopContainer.remove();\nstate.isScrollButtonCreated = false;\n}\n}\n\nreturn { createScrollToTopBtn, handleScroll, removeScrollButton };\n})();\n\n// MainPage Module: Placeholder for main page logic\nconst MainPage = (function () {\nreturn {};\n})();\n\n// Navigation Module: URL-based navigation and event handling\nconst Navigation = (function () {\nconst { state, utils, cache } = Core;\n\nfunction handleNavigationChange() {\nconst currentUrl = window.location.href;\nconst currentPath = window.location.pathname;\nif (currentUrl !== state.lastUrl) {\n// Reset cache only if the base path changes (ignore ?v changes)\nif (!state.lastUrl || currentPath !== new URL(state.lastUrl).pathname) {\ncache.center = null;\ncache.container = null;\ncache.primary = null;\ncache.columns = null;\n}\nstate.lastUrl = currentUrl;\nconst currentShortsId = utils.getShortsId();\nif (currentUrl.includes('youtube.com/shorts')) {\nif (state.isScrollButtonCreated) {\nWatch.removeScrollButton();\n}\nif (currentShortsId !== state.lastShortsId || currentShortsId !== state.observerShortsId || !state.observer) {\nstate.lastShortsId = currentShortsId;\nif (state.observer && currentShortsId !== state.observerShortsId) {\nstate.observer.disconnect();\nstate.observer = null;\nstate.observerShortsId = null;\n}\nShorts.SkippingShortsMechanism();\n}\nShorts.createShortsSkipBtn();\n} else if (utils.checkIfWatchPage()) {\nShorts.removeToggleButton();\nif (state.observer) {\nstate.observer.disconnect();\nstate.observer = null;\nstate.observerShortsId = null;\n}\nstate.lastShortsId = null;\nstate.lastProcessedShortsId = null;\nif (!state.isScrollButtonCreated) {\nWatch.createScrollToTopBtn();\n}\n} else {\nShorts.removeToggleButton();\nif (state.isScrollButtonCreated) {\nWatch.removeScrollButton();\n}\nif (state.observer) {\nstate.observer.disconnect();\nstate.observer = null;\nstate.observerShortsId = null;\n}\nstate.lastShortsId = null;\nstate.lastProcessedShortsId = null;\n}\nLayout.updateLayout();\n}\n}\n\nreturn { handleNavigationChange };\n})();\n\n// Global Event Listeners and Initial Calls\ndocument.addEventListener('wheel', function (event) {\nif (!Core.utils.checkIfShortsPage()) return;\nconst now = Date.now();\nif (event.deltaY !== 0 && now - Core.state.lastWheelEvent > Core.state.debounceDelay) {\nCore.state.lastWheelEvent = now;\nif (Core.utils.checkIfShortsPage()) {\nconst currentShortsId = Core.utils.getShortsId();\nif (currentShortsId !== Core.state.observerShortsId) {\nif (Core.state.observer) {\nCore.state.observer.disconnect();\nCore.state.observer = null;\nCore.state.observerShortsId = null;\n}\nCore.state.lastShortsId = currentShortsId;\n}\n}\n}\n});\n\ndocument.addEventListener('keydown', function (event) {\nif (!Core.utils.checkIfShortsPage()) return;\nconst now = Date.now();\nif ((event.keyCode === 38 || event.keyCode === 40) && now - Core.state.lastKeyEvent > Core.state.debounceDelay) {\nCore.state.lastKeyEvent = now;\nif (Core.utils.checkIfShortsPage()) {\nconst currentShortsId = Core.utils.getShortsId();\nif (currentShortsId !== Core.state.observerShortsId) {\nif (Core.state.observer) {\nCore.state.observer.disconnect();\nCore.state.observer = null;\nCore.state.observerShortsId = null;\n}\nCore.state.lastShortsId = currentShortsId;\n}\n}\n}\n});\n\nwindow.addEventListener('scroll', Core.utils.debounce(Watch.handleScroll, 150));\n\nwindow.addEventListener('resize', Core.utils.throttle(() => {\nLayout.updateLayout();\nif (Core.utils.checkIfWatchPage() && !Core.state.isScrollButtonCreated) {\nWatch.createScrollToTopBtn();\n}\n}, 30));\n\nwindow.addEventListener('load', () => {\nLayout.updateLayout();\nNavigation.handleNavigationChange();\n});\n\nwindow.addEventListener('popstate', () => {\nLayout.updateLayout();\nNavigation.handleNavigationChange();\n});\n\nwindow.addEventListener('DOMContentLoaded', () => {\nNavigation.handleNavigationChange();\n});\n\nconst titleObserver = new MutationObserver(Core.utils.debounce(() => {\nNavigation.handleNavigationChange();\n}, 100));\ntitleObserver.observe(document.querySelector('title'), { childList: true });\n\nLayout.updateLayout();\nNavigation.handleNavigationChange();\n})();",
    "customtheme": false,
    "darktheme": false,
    "date": 1648332255121,
    "defaultvolume": false,
    "disableautoplay": false,
    "executescript": false,
    "expanddescription": true,
    "filter": "none",
    "griditemsperrow": {
      "channel": {
        "shorts": {
          "apply": false,
          "count": 5
        },
        "videos": {
          "apply": false,
          "count": 4
        }
      },
      "posts": {
        "apply": false,
        "count": 4
      },
      "shorts": {
        "apply": false,
        "count": 8
      },
      "videos": {
        "apply": false,
        "count": 4
      }
    },
    "hidecardsendscreens": true,
    "hidechat": false,
    "hidecomments": false,
    "hiderelated": false,
    "hideshorts": false,
    "ignoreplaylists": true,
    "ignorepopupplayer": true,
    "localecode": "en_US",
    "localedir": "ltr",
    "miniplayer": true,
    "miniplayerposition": "top-right",
    "miniplayersize": "560x315",
    "newestcomments": false,
    "overridespeeds": false,
    "pauseforegroundtab": false,
    "pausevideos": true,
    "popuplayersize": "747x420",
    "previousversion": "3.0.10",
    "qualityembeds": "hd720",
    "qualityembedsfullscreen": "hd1080",
    "qualityplaylists": "hd720",
    "qualityplaylistsfullscreen": "hd1440",
    "qualityvideos": "hd1080",
    "qualityvideosfullscreen": "hd1440",
    "reload": false,
    "reversemousewheeldirection": false,
    "selectquality": true,
    "selectqualityfullscreenoff": true,
    "selectqualityfullscreenon": true,
    "speed": 1,
    "speedvariation": 0.1,
    "stopvideos": false,
    "theatermode": false,
    "theme": "default-dark",
    "themevariant": "dark-red.css",
    "update": 1756586337685,
    "vendorthemevariant": "youtube-deep-dark.css",
    "videofilters": {
      "blur": 0,
      "brightness": 100,
      "contrast": 100,
      "grayscale": 0,
      "inversion": 0,
      "rotation": 0,
      "saturation": 100,
      "sepia": 0
    },
    "volume": 100,
    "volumemultiplier": 2,
    "volumevariation": 5,
    "whatsnew": false,
    "wideplayer": true,
    "wideplayerviewport": false
  }
}
